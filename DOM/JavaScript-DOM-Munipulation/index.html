<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM</title>
</head>
<body>
    <!-- All of our HTML code will go here -->
    <p id="testParagraph">sample text</p>

    <p class="sampleClass">This paragraph has a class of 'sampleClass'</p>

    <button id="clickThisButton">I want to be clicked</button>



    <!-- Example -->
    <label for="nameInput">Enter Your Name:</label>
    <input type="text" id="nameInput" placeholder="John Smith" />
    <p>Welcome!</p>
    <p>No name has been entered</p>


    <script type="text/javascript">
    //DOM
    //***********
        /* All of our JavaScript code will go here */
        document.getElementById('testParagraph').style.color = 'blue';
        console.log(document.getElementById('testParagraph').style.color);

        console.log(document.querySelectorAll("p.sampleClass"));
        document.querySelectorAll("p.sampleClass")[0].innerText = "My text was changed!";

        console.log(document.querySelectorAll("p.sampleClass"));
        document.querySelectorAll("p.sampleClass")[0].innerHTML = "<span>I am a whole new element!</span>";

        document.getElementById('clickThisButton').addEventListener('click', () => {
            console.log('I was clicked!');
        });
        document.getElementById('clickThisButton').addEventListener('click', (details) => {
        console.log(details);
        details.target.style.backgroundColor = 'red';
        });

        // example
        document.getElementById('nameInput').addEventListener('keyup', (event) => {
            console.log(event);
        });
        document.getElementById('nameInput').addEventListener('keyup', (event) => {
        console.log(event.target.value);
        });

        //better solution
        document.getElementById('nameInput').addEventListener('keyup', (event) => {
        console.log(event.target.value);
        console.log(document.getElementsByTagName("p"));
        });

        document.getElementById('nameInput').addEventListener('keyup', (event) => {
        document.getElementsByTagName("p")[1].innerText = `Everyone please welcome ${event.target.value} to the stage.`;
        });

        document.getElementById('nameInput').addEventListener('keyup', (event) => {
        if (event.target.value === '') {
            document.getElementsByTagName("p")[1].innerText = `No name has been entered`;
        } else {
            document.getElementsByTagName("p")[1].innerText = `Everyone please welcome ${event.target.value} to the stage.`;
        }
        });


        //CallBacks
        //**********

        function callbackFunction(){
        const data = {
        name: 'Ralf Machio', 
        age: 66, 
        occupation: 'kickboxing'
        }
        return data;
        }

        function showGreeting(dataFromFunction){
        return "hello " + dataFromFunction.name + ", I hear you're the greatest?!"
        }

        console.log(
        showGreeting(callbackFunction())
        )


        function callbackFunction(){
    for(let i = 0; i < 100; i++){
        console.log(i)
    }

     const data = {
        name: 'Ralf Machio', 
        age: 66, 
        occupation: 'kickboxing'
    }
    return data;
    }

    function showData(dataFromFunction){
    return "hello " + dataFromFunction.name
    }

    console.log(
    showData(callbackFunction())
    )  
    
    //Promises
    //***********

    // Boolean declaration 
var amIGood = false;

// Promise 
var iCanHasGift = new Promise(
    function (resolve, reject) {
        if (amIGood) {
            var gift = {
                brand: 'HasMattelbro',
                item: 'Turbo-Man action figure'
            };
            resolve(gift); // fulfilled 
        } else {
            var naughty = "You've made Santa's naughty list; enjoy your coal!";
            reject(naughty); // rejected
        }
    }
);


// Here's the proper syntax for a promise:
// new Promise(/* executor */ function (resolve, reject) {...} );

// Promise call 
var checkTwice = function () {
    iCanHasGift
        .then(function (fulfilled) {
            // nice list = gift
            console.log(fulfilled);
        // output: { brand: 'HasMattelbro', item: 'Turbo-Man action figure'} 
        })
        .catch(function (error) {
            // naughty list = coal
            console.log(error);
        // output: "You've made Santa's naughty list; enjoy your coal!"
        });
};

checkTwice();

// 2nd promise
var playDate = function (gift) {
    return new Promise(
        function (resolve, reject) {
            var message = "Salutations fellow child I enjoy interacting with! I notice you received a posable plastic Batman figurine during the Yultide season. What do you think of my new " + gift.brand + ' ' + gift.item + '?';

            resolve(message); 
        }
    );
};

// Promise call
var checkTwice = function () {
    console.log('before Christmas'); // log before
    iCanHasGift
        .then(playDate)
        .then(function (fulfilled) {
            console.log(fulfilled);
        })
        .catch(function (error) {
            console.log(error)
        });
    console.log('after opening gifts'); // log after
}

checkTwice()

//Chaining Promises
//*****************

// 2nd promise
var playDate = function (gift) {
    return new Promise(
        function (resolve, reject) {
            var message = "Salutations fellow child I enjoy interacting with! I notice you received a posable plastic Batman figurine during the Yultide season. What do you think of my new " + gift.brand + ' ' + gift.item + '?';

            resolve(message); 
        }
    );
};

// 2nd promise
var playDate = function (gift) {
    var message = "Salutations, fellow child I enjoy interacting with! I notice you received a posable plastic Batman figurine during the Yultide season. What do you think of my new " + gift.brand + ' ' + gift.item + '?';

    return Promise.resolve(message);
};

// Promise call
var checkTwice = function () {
    iCanHasGift
    .then(playDate) // chain here
    .then(function (fulfilled) {
        console.log(fulfilled);
        // output: "Salutations fellow child I enjoy interacting with! I notice you received a posable plastic Batman figurine during the Yultide season. What do you think of my new HasMattelbro Turbo-Man action figure?"
    })
    .catch(function (error) {
        // all I got was a lump of coal :(
        console.log(error)
        // output: "You've made Santa's naughty list; enjoy your coal!"
    });
};

checkTwice();


//Fetch
//*************

fetch('http://example.com/movies.json')
    .then(function(response) {
        return response.json();
    })
    .then(function(myJson) {
        console.log(myJson)
    })





</script>




    </script>
</body>
</html>